
<include file="Public/persontop"/>
<div class="g">
	<!--面包屑 -->
	<div class="breadcrumb-area icon-breadcrumb fcn">您现在的位置：
		<a href="{:U('Index/index')}" title="首页">首页</a>&nbsp;&gt;&nbsp;
		<span id="personCenter"><a href="{:U('Member/index')}" title="个人中心">个人中心</a></span>
		<span id="pathPoint">&nbsp;&gt;&nbsp;</span>
		<b id="pathTitle">密码管理</b>
	</div>
</div>
<div class="hr-15"></div>
<div class="g">
    <div class="fr u-4-5"><!--栏目 -->
	<div class="part-area clearfix">
		<div class="fl">
			<h3 class="password-title"><span>密码管理</span></h3>
		</div>
	</div>
	<div class="hr-35"></div>
	<!--密码管理 -->
	<form id="password-list"  onsubmit="return false;" >
		<div class="password-area">
			<div class="form-edit-area">
				<div class="form-edit-table">
					<table border="0" cellpadding="0" cellspacing="0">
						<tbody>
							<tr>
								<th><span class="required">*</span>当前密码：</th>
								<td><label style="display: block; position: absolute; cursor: text; float: left; z-index: 2; color: rgb(153, 153, 153);" class="text vam span-150" for="input_label_0"></label>
								<input name="oldPassword" type="password" maxlength="16" class="text vam span-150"  id="input_label_0" style="z-index: 1;" placeholder="请输入当前密码">
								</td>
							</tr>
							<tr>
								<th><span class="required">*</span>新密码：</th>
								<td><label style="display: block; position: absolute; cursor: text; float: left; z-index: 2; color: rgb(153, 153, 153);" class="text vam span-150" for="input_label_1">
								</label>
								
								<input name="newPassword" type="password" maxlength="16" class="text vam span-150"  id="input_label_1" style="z-index: 1;" placeholder="请输入新密码">
								</td>
							</tr>
							<tr>
								<th><span class="required">*</span>重复新密码：</th>
								<td><label style="display: block; position: absolute; cursor: text; float: left; z-index: 2; color: rgb(153, 153, 153);" class="text vam span-150" for="input_label_2"></label>
								
								<input name="renewPassword" type="password" maxlength="16" class="text vam span-150"  id="input_label_2" style="z-index: 1;" placeholder="重复新密码">
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="form-edit-action">
					<input type="button" class="button-replace vam" id="pwd_submit" value="&nbsp;">
				</div>
			</div>
		</div>
	</form>
</div>

<!--左边菜单 -->
	<include file="Public/personcl"/>
</div>
<div class="hr-60"></div>
<script text='text/javascript'>
    $(function(){
	     var pwd_submit=$("#pwd_submit");
		 var url="{:U('Login/index')}";
		 pwd_submit.click(function(){
		     var status=1;
		     var old_pwd=$("#input_label_0").val();
			 var new_pwd=$("#input_label_1").val();
			 var align_pwd=$("#input_label_2").val();
			  
			 if(!(/^(\d|[a-z]){6,32}$/i.test(old_pwd))){
			     status=0;
				 alert("旧密码不符合要求格式");
				 return ;
			 }
			 if(new_pwd!=align_pwd){
			     alert("新密码两次不相等");
			     status=0;
				 return;
			 }
			 
		    if(!(/^(\d|[a-z]){6,32}$/i.test(new_pwd))){
			     status=0;
				 alert("新密码不符合要求格式");
				 return ;
			}
			 
			if(status==1){
			  
			     $.ajax({
				     url:"{:U('PersonCenter/modifierPwd')}",
					 type:"POST",
					 data:{
					    'old_pwd':old_pwd,
						'new_pwd':new_pwd,
					 
					 },
					 success:function(responseText,status,xhr){
					     if(status=="success"){
						     if(responseText==1){
							     alert("修改成功,请重新登录");
								 window.location.href=url;
								 
							 }else{
							     alert("修改失败");
							 
							 }
						 
						 }else{
						     alert("修改失败");
						 }
					 
					 },
					 error:function(){
					     alert("修改失败！");
					 
					 },
					 timeout:60*1000,
				 
				 
				 
				 });
			
			
			
			} 
		 
		 
		 
		 
		 
		 
		 
		 });
	
	
	
	
	
	
	
	
	});




</script>
<!--底部 -->
	<include file="Public/footer"/>

<div id="AutocompleteContainter_7fce7" style="position: absolute; z-index: 9999; top: 93px; left: 556.5px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_7fce7" style="display: none; width: 315px; max-height: 400px;"></div></div></div></body></html>